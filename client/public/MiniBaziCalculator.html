<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">  <head>  <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />  <title>Mini BaZi Calculator</title>          <style>  .ramka input {width:42px}.ramka {border-style:solid; border-width:1px; padding:10px; border-color:#999; page-break-inside:avoid;}.ramka2 {border-style:solid; border-width:1px; padding:0px; border-color:#999; page-break-inside:avoid;}.nobreak {page-break-inside:avoid;}table {text-align:center}.p1, .p2, .k3, .k4, .d {background-color:#7FC96A; /*659157*/}.p3, .p4, .k6, .k7, .o {background-color:#FF6D70; /*#FF5F54*/}.p5, .p6, .k2, .k5, .k8, .k11, .z {background-color:#FFD187; /*#FFC44F*/}.p7, .p8, .k9, .k10, .m {background-color:#C9C3CC; /*#ADA8AF*/}.p9, .p10, .k1, .k12, .w {background-color:#9BA2FF; /*#7C7EFF*/}.p-1, .k-1 {border-color: #DDD; border-style:solid; border-width:1px; color:#888}.p1, .p2, .k3, .k4, .p3, .p4, .k6, .k7, .p5, .p6, .k2, .k5, .k8, .k11, .p7, .p8, .k9, .k10, .p9, .p10, .k1, .k12 {transition:all 0.6s}.p1b, .p2b, .k3b, .k4b {background-color:#4C773F}.p3b, .p4b, .k6b, .k7b {background-color:#DF1F14}.p5b, .p6b, .k2b, .k5b, .k8b, .k11b {background-color:#DFA42F}.p7b, .p8b, .k9b, .k10b {background-color:#8D888F}.p9b, .p10b, .k1b, .k12b {background-color:#5C5EFF}.p1b, .p2b, .k3b, .k4b, .p3b, .p4b, .k6b, .k7b, .p5b, .p6b, .k2b, .k5b, .k8b, .k11b, .p7b, .p8b, .k9b, .k10b, .p9b, .p10b, .k1b, .k12b {transition:all 0.6s; }.sp1:hover, .sp2:hover, .sk3:hover, .sk4:hover {background-color:#4C773F }.sp3:hover, .sp4:hover, .sk6:hover, .sk7:hover {background-color:#DF1F14 }.sp5:hover, .sp6:hover, .sk2:hover, .sk5:hover, .sk8:hover, .sk11:hover {background-color:#DFA42F }.sp7:hover, .sp8:hover, .sk9:hover, .sk10:hover {background-color:#8D888F }.sp9:hover, .sp10:hover, .sk1:hover, .sk12:hover {background-color:#5C5EFF}.s:hover {background-color:orange}.sp1, .sp2, .sk3, .sk4, .sp3, .sp4, .sk6, .sk7, .sp5, .sp6, .sk2, .sk5, .sk8, .sk11, .sp7, .sp8, .sk9, .sk10, .sp9, .sp10, .sk1, .k12, s {transition:all 0.6s}.sila {background-color:#bec}.slab {background-color:#dbb}.inline div {display:inline}input.add {width:18px; font-size:10px;}.f10 {font-size:10px;}.f9 {font-size:9px}.f12 {font-size:12px}.szary {background-color:#eee}.bialy {background-color:white}#data2 {width:15px}.gwiazdy {font-size:10px; text-align:left}.gwiazdy a {color:navy; text-decoration:none}.gwiazdy a:hover {color:blue; text-decoration:underline}.dhhs {text-align:center; font-size:9px; border-width:0px; border-color:white; border-style:solid; border-top-width:2px;}select option {background-color:white}label {font-size:11px}#miasto1, #miasto2 {font-style:italic; font-size:11px; width:70px}.left11 {text-align:left; font-size:11px}#info1, #info2, .sz {color:grey}.opcje {text-align:left;}.opcje input {width:15px}.up {font-size:9px;}.center {text-align:center}.margin30 {margin:30px}.left {text-align:left}.right {text-align:right}.cn {font-size:22pt} /* chwilowo nieużywane */.to3 {width:150px; text-align:left; font-size:10px}#licz2 {width:200px; margin-left:380px}.gwiazdySymb {color:#557;}.FZ {color:#444}.TG {font-size:9px; color:#333}.HHS td {padding:0px}.Nar {font-size:14px; color:#333}img {border-width:0px; padding:5px;} /* padding do chińskich nazw filarów */.stopka {margin-bottom:100px}.kropki1 {border-width:0px; border-bottom-width:1px; border-style:dotted; border-color:#bbb; padding-bottom:15px}.kropki2 {border-width:0px; border-bottom-width:1px; border-style:dotted; border-color:#bbb; padding-bottom:5px}#fart td {width:100px}table.sto td {width:100px}.trans {background-color:transparent; border-color:transparent}.legenda {display:inline-block; height:15px; width:15px; margin:10px}.next {text-decoration:none; color:orange}.next:hover {background-color:grey}.przyciskiSilver {text-decoration:none;font-size:14px;margin:15px;width:200px;padding:15px;display:inline-block;border-style:solid; border-width:1px; border-color:#cccccc; border-radius:9px;color:navy;cursor: pointer; cursor: hand;}.nieSilver {background: rgb(245,245,245);text-decoration:none;font-size:14px;margin:0px 0px 15px 70px;width:220px;padding:15px;display:inline-block;border-style:solid; border-width:1px; border-color:#cccccc; border-radius:9px;color:navy;cursor: pointer; cursor: hand;/*transition: all 1s ease-out 0.2s;*/}.nieSilver:hover {background: rgb(206,220,231);}@media print {.noprint { display:none }#zapisCookie, #drukuj, #licz2 {display:none}/*.pageBreak {page-break-after:always} nic nie da; lub:auto */#fart {width:800px} /* #daty - kiepsko wygląda */a {color:inherit; text-decoration:none}}body {font-family:verdana}#div1 {text-align:center} /* IE tak ma być! */#div2 {width:1280px; margin:auto; text-align:left}#menu {border-style:solid; border-color:#ccc; border-width:0px 0px 1px 0px; padding:0px 50px 10px 0px}#menu ul li {float:right; list-style-type:none; }#menu a {background-color:#eee; padding:10px; color:#333; margin:1px; border-radius:20px 7px 0px 0px; text-decoration:none}#menu a:hover {background-color:#ccc}#jezyk {text-align:right; clear:both; font-size:11px; padding-right:50px}h1 {font-size:26px; font-family:monda; font-weight:normal; text-align:center}h2 {font-size:22px; font-family:monda; font-weight:normal;}.silver {border-style:solid; border-width:1px; border-color:#cccccc; border-radius:9px;color:navy;cursor: pointer; cursor: hand;background: rgb(238,238,238);background: -moz-linear-gradient(top, rgba(238,238,238,1) 0%, rgba(204,204,204,1) 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(204,204,204,1)));background: -webkit-linear-gradient(top, rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%);background: -o-linear-gradient(top, rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%);background: -ms-linear-gradient(top, rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%);background: linear-gradient(to bottom, rgba(238,238,238,1) 0%,rgba(204,204,204,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#cccccc',GradientType=0 );}.silver:hover {background: rgb(206,220,231);background: -moz-linear-gradient(top, rgba(206,220,231,1) 0%, rgba(89,106,114,1) 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(206,220,231,1)), color-stop(100%,rgba(89,106,114,1)));background: -webkit-linear-gradient(top, rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%);background: -o-linear-gradient(top, rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%);background: -ms-linear-gradient(top, rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%);background: linear-gradient(to bottom, rgba(206,220,231,1) 0%,rgba(89,106,114,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cedce7', endColorstr='#596a72',GradientType=0 );}.gold {border-style:solid; border-width:1px; border-color:#cccccc; border-radius:9px;color:navy;cursor: pointer; cursor: hand;background: rgb(243,226,199);background: -moz-linear-gradient(top, rgba(243,226,199,1) 0%, rgba(193,158,103,1) 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(238,238,238,1)), color-stop(100%,rgba(193,158,103,1)));background: -webkit-linear-gradient(top, rgba(243,226,199,1) 0%,rgba(193,158,103,1) 100%);background: -o-linear-gradient(top, rgba(243,226,199,1) 0%,rgba(193,158,103,1) 100%);background: -ms-linear-gradient(top, rgba(243,226,199,1) 0%,rgba(193,158,103,1) 100%);background: linear-gradient(to bottom, rgba(243,226,199,1) 0%,rgba(193,158,103,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f3e2c7', endColorstr='#e9d4b3',GradientType=0 );}.gold:hover {background: rgb(193,158,103);background: -moz-linear-gradient(top, rgba(193,158,103,1) 0%, rgba(173,158,83,1) 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(193,158,103,1)), color-stop(100%,rgba(173,158,83,1)));background: -webkit-linear-gradient(top, rgba(193,158,103,1) 0%,rgba(173,158,83,1) 100%);background: -o-linear-gradient(top, rgba(193,158,103,1) 0%,rgba(173,158,83,1) 100%);background: -ms-linear-gradient(top, rgba(193,158,103,1) 0%,rgba(173,158,83,1) 100%);background: linear-gradient(to bottom, rgba(193,158,103,1) 0%,rgba(173,158,83,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e9d4b3', endColorstr='#d9e4a3',GradientType=0 );}.center {text-align:center}.f10 {font-size:10px;}.f9 {font-size:9px}.f12 {font-size:12px}  #calc {font-size:12px; text-align:center; padding:10px}  #calc a {text-decoration:none; color:navy; padding:10px 0px}  #calc a:hover {background-color:navy;color:white;text-decoration:underline}  </style>       <script type="text/javascript" language="javascript">  function err(txt) {document.getElementById('info1').innerHTML = txt;}function rokPrzestepny(rok) {return ((rok%4 == 0 && rok%100 != 0) || rok%400 == 0);}function in_array(needle, haystack) {    var length = haystack.length;    for(var i = 0; i < length; i++) {        if(haystack[i] == needle) return true;    }    return false;}var dc = 'c';function dodawanieDat(data1, data2) {dataWynik = new Array();dataWynik[1] = data1[1] + data2[1];while(dataWynik[1] > 59) { dataWynik[1] -= 60; data1[0] = data1[0]+1; }while(dataWynik[1] < 0) { dataWynik[1] += 60; data1[0] = data1[0]-1; }dataWynik[0] = data1[0] + data2[0];while(dataWynik[0] > 23) { dataWynik[0] -= 24; data1[4]++; }while(dataWynik[0] < 0) { dataWynik[0] += 24; data1[4]--; }dataWynik[2] = 0; dataWynik[3] = data1[3] + data2[3];if(dataWynik[3] > 12) { dataWynik[3] -= 12; data1[5]++; }if(dataWynik[3] < 0) { dataWynik[3] += 12; data1[5]--; }dataWynik[5] = data1[5] + data2[5];if(dataWynik[5]<0) die ("Data p.n.e");dataWynik[4] = data1[4] + data2[4];while(dataWynik[4]>28) {if(in_array(dataWynik[3], array(3,5,7,8,10,12))) { if(dataWynik[4]>31) {dataWynik[3]++;dataWynik[4]-=31;}}else if(in_array(dataWynik[3], array(4,6,9,11))) { if(dataWynik[4]>30) {dataWynik[3]++;dataWynik[4]-=30;}}else if(in_array(dataWynik[3], array(2))) { if (rokPrzestepny(dataWynik[5]))luty29 = 1;if(dataWynik[4]>(28+luty29)) {dataWynik[3]++;dataWynik[4] = dataWynik[4] - (28+luty29);}}else if(in_array(dataWynik[3], array(1))) { if (rokPrzestepny(dataWynik[5]))luty29 = 1;if(dataWynik[4]>31) { dataWynik[3]++;dataWynik[4]-=31;if(dataWynik[4]>(28+luty29)) {dataWynik[3]++;dataWynik[4] = dataWynik[4] - (28+luty29);}}}if(dataWynik[3] > 12) { dataWynik[3] -= 12; data1[5]++; }}while(dataWynik[4]<0) {if(in_array(dataWynik[3], array(1,2,4,6,8,9,11))) { dataWynik[3]--;dataWynik[4]+=31;}else if(in_array(dataWynik[3], array(5,7,10,12))) { dataWynik[3]--;dataWynik[4]+=30;}else if(dataWynik[3]==3) {if (rokPrzestepny(dataWynik[5]))luty29 = 1;dataWynik[3]--;dataWynik[4]+=(28+luty29);}if(dataWynik[3] < 1) { dataWynik[3] += 12; data1[5]--; }}return dataWynik;}function dzienRokuPom(d) {    var yn = d.getFullYear();    var mn = d.getMonth();    var dn = d.getDate();    var d1 = new Date(yn,0,1,12,0,0);    var d2 = new Date(yn,mn,dn,12,0,0);    var ddiff = Math.round((d2-d1)/864e5);    return ddiff;}function dajDzienRoku(data) {if (rokPrzestepny(data[5])) {rok = 2004;}else rok = 2002;d = new Date(rok,(data[3]-1),data[4],data[0],data[1],0);return dzienRokuPom(d);}var hv = 585956537;function data4fp2(rok, miesiac, dzien, godzina, minuta, strefaCzasowa) {if(godzina>23) godzina=0;momentUrodzenia = new Array(godzina, minuta, 0, miesiac, dzien, rok);dzienRoku = dajDzienRoku(momentUrodzenia);dzienRokuUr = dzienRoku;poczatekRoku2004 = new Array(11, 57, 0, 2, 4, 2004);czasSlonecznyRokuRoznica = 5/24 + (49.5/60)/24;roznicaLat = rok - 2004;roznicaDni = roznicaLat * czasSlonecznyRokuRoznica - Math.ceil(roznicaLat/4);if (roznicaDni < 0) ileDni = Math.ceil(roznicaDni); else ileDni = Math.floor(roznicaDni);roznicaGodzin = (roznicaDni - ileDni) * 24; if (roznicaGodzin < 0) ileGodzin = Math.ceil(roznicaGodzin);else ileGodzin = Math.floor(roznicaGodzin);roznicaMinut = (roznicaGodzin - ileGodzin) * 60; ileGodzin += strefaCzasowa; poczatekRokuX = dodawanieDat(poczatekRoku2004, new Array(ileGodzin, roznicaMinut, 0, 0, ileDni, roznicaLat));roznicaDniOd4lutegoDoDatyX = dajDzienRoku(momentUrodzenia) - dajDzienRoku(poczatekRokuX) +(momentUrodzenia[0] - poczatekRokuX[0]) / 24 +((momentUrodzenia[1] - poczatekRokuX[1]) / 24) / 60;rokChinski = rok - 1924 + 1;hx = dc+'al'+dc;while (rokChinski < 60) rokChinski += 60;while (rokChinski > 60) rokChinski -= 60;pienRokuX = rokChinski;while (pienRokuX > 10) pienRokuX -= 10;if (roznicaDniOd4lutegoDoDatyX < 0) rokChinski--;pienRoku = rokChinski;while (pienRoku > 10) pienRoku -= 10;while (pienRoku < 1) pienRoku += 10;konarRoku = rokChinski;while (konarRoku > 12) konarRoku -= 12;while (konarRoku < 1) konarRoku += 12;miesiacSloneczny = (365 + czasSlonecznyRokuRoznica) / 12;tempRoznicaDni = 0;miesiacChinski = 2;przed4lutym = false;poczatekMiesiacaX = dajDzienRoku(poczatekRokuX)+poczatekRokuX[0]/24;poczatekNastMiesiaca = poczatekMiesiacaX;dlugoscMiesiaca = 0;if (roznicaDniOd4lutegoDoDatyX < 0) {miesiacChinski = 2;przed4lutym = true;poczatekMiesiacaX = poczatekMiesiacaX - (29 + 11/24 + (39/60)/24);if (roznicaDniOd4lutegoDoDatyX < (-29 - 11/24 - (40/60)/24)) {miesiacChinski = 1;poczatekMiesiacaX = poczatekMiesiacaX -  (29 + 11/24 + (12/60)/24);poczatekNastMiesiaca = poczatekNastMiesiaca - (29 + 11/24 + (39/60)/24);}}else {while(roznicaDniOd4lutegoDoDatyX > tempRoznicaDni) {miesiacChinski++;poczatekMiesiacaX = poczatekMiesiacaX + dlugoscMiesiaca;switch (miesiacChinski) {case 3 : dlugoscMiesiaca = 29 + 17/24 + (59/60)/24; break; case 4 : dlugoscMiesiaca = 30 + 4/24 + (45/60)/24; break; case 5 : dlugoscMiesiaca = 30 + 17/24 + (12/60)/24; break;case 6 : dlugoscMiesiaca = 31 + 4/24 + (4/60)/24; break; case 7 : dlugoscMiesiaca = 31 + 10/24 + (12/60)/24; break; case 8 : dlugoscMiesiaca = 31 + 9/24 + (47/60)/24; break; case 9 : dlugoscMiesiaca = 31 + 2/24 + (59/60)/24; break; case 10 : dlugoscMiesiaca = 30 + 15/24 + (46/60)/24; break; case 11 : dlugoscMiesiaca = 30 + 3/24 + (20/60)/24; break; case 12 : dlugoscMiesiaca = 29 + 16/24 + (57/60)/24; break; case 13 : dlugoscMiesiaca = 29 + 11/24 + (12/60)/24; break; case 14 : dlugoscMiesiaca = 29 + 11/24 + (39/60)/24; break; }tempRoznicaDni = tempRoznicaDni + dlugoscMiesiaca;poczatekNastMiesiaca = poczatekNastMiesiaca + dlugoscMiesiaca;}}if (hc(document.getElementById(hx).innerHTML) != hv) hk=7; else hk=0;konarMiesiaca = miesiacChinski;pienTygrysa = (pienRokuX * 2) + 1; pienMiesiaca = pienTygrysa + miesiacChinski + 7;while (pienMiesiaca > 10) pienMiesiaca -= 10;while (konarMiesiaca > 12) konarMiesiaca -= 12;while (dzienRoku > 59) dzienRoku -= 60; liczbaRoku1924 = 16;roznicaLat = rok - 1924;lataPrzestepne = Math.ceil(roznicaLat/4);lataPrzestepne = lataPrzestepne - (Math.floor(rok/100) - Math.floor(1924/100)) + (Math.floor(rok/400) - Math.floor(1924/400));if ((rok < 1924) && (rok > 1601) && ((rok%100)==0)) lataPrzestepne++; if ((rok > 2000) && ((rok%100)==0) && (!(rok%400)==0)) lataPrzestepne++; if (rok <= 1582) {if((miesiac < 10) || ((miesiac == 10) && (dzien < 15)))liczbaRoku1924 += 10; lataPrzestepne += (Math.floor(rok/100) - Math.floor(1582/100)) - (Math.floor(rok/400) - Math.floor(1582/400));}liczbaRoku = liczbaRoku1924 + lataPrzestepne + (roznicaLat * 5);while (liczbaRoku > 60) liczbaRoku -= 60;while (liczbaRoku < 1) liczbaRoku += 60;dzienChinski = dzienRoku + liczbaRoku;while (dzienChinski > 60) dzienChinski -= 60;if(hk!=0) dzienChinski = hk+2;konarDnia = dzienChinski;while (konarDnia > 12) konarDnia -= 12;pienDnia = dzienChinski;while (pienDnia > 10) pienDnia -= 10;godzina = Math.ceil(godzina / 2) + 1; konarGodziny = godzina;pienSzczura = (pienDnia * 2) - 1;pienGodziny = pienSzczura - 1 + godzina;while (pienGodziny > 10) pienGodziny -= 10;if (konarGodziny == 13) konarGodziny = 1;wynik = new Array(pienRoku, konarRoku, pienMiesiaca, konarMiesiaca, pienDnia, konarDnia, pienGodziny, konarGodziny, hx, poczatekMiesiacaX, poczatekNastMiesiaca, dzienRokuUr);return wynik;}function ema() {var ema1 = "gmail.com";var ema3 = "bazi";var ema2 = "calculator@";var ema = ema3 + ema2 + ema1;if (document.getElementById('ema').innerHTML != ema) {document.getElementById('ema').href='mailto:'+ema;}}var pnie = new Array(0, "Jia", "Yi", "Bing", "Ding", "Wu", "Ji", "Geng", "Xin", "Ren", "Gui");var konary = new Array(0, "Zi", "Chou", "Yin", "Mao", "Chen", "Si", "Wu", "Wei", "Shen", "You", "Xu", "Hai");var pnieEn = new Array(0, "wood+", "wood-", "fire+", "fire-", "earth+", "earth-", "metal+", "metal-", "water+", "water-");var konaryEn = new Array(0, "Rat", "Ox", "Tiger", "Rabbit", "Dragon", "Snake", "Horse", "Sheep", "Monkey", "Rooster", "Dog", "Pig");function hc(txt){    var h = 0;    if (txt.length == 0) return h;    for (i = 0; i < txt.length; i++) {        char = txt.charCodeAt(i);        h = ((h<<5)-h)+char;        h = h & h;}return h;}function pusteKonaryF(kk, pp) { numerFazy = pp - kk;while (numerFazy < 0) numerFazy += 12;while (numerFazy > 12) numerFazy -= 12;if (numerFazy > 0) numerFazy = numerFazy/2;switch (numerFazy) {case 0: pusteKonary = 11; break; case 1: pusteKonary = 9; break; case 2: pusteKonary = 7; break; case 3: pusteKonary = 5; break; case 4: pusteKonary = 3; break; case 5: pusteKonary = 1; break; }return new Array(pusteKonary, pusteKonary+1);}function rysujPusteKonary(konarX, pienX) {pusteKonaryRes = pusteKonaryF(konarX, pienX);pustyKonar1 = pusteKonaryRes[0]; pustyKonar2 = pusteKonaryRes[1];return 'Void: '+konary[pustyKonar1]+', '+konary[pustyKonar2];}function dajUkrytePnie(konar) {switch (konar) {case 1: UP = new Array(10,0); proporcje = new Array(8,0); break;case 2: UP = new Array(10,8,6); proporcje = new Array(2,1,5); break;case 3: UP = new Array(5,3,1); proporcje = new Array(1,2,5); break;case 4: UP = new Array(2,0); proporcje = new Array(8,0); break;case 5: UP = new Array(2,10,5); proporcje = new Array(2,1,5); break;case 6: UP = new Array(5,7,3); proporcje = new Array(2,1,5); break;case 7: UP = new Array(6,4); proporcje = new Array(3,5); break;case 8: UP = new Array(4,2,6); proporcje = new Array(2,1,5); break;case 9: UP = new Array(5,9,7); proporcje = new Array(1,2,5); break;case 10: UP = new Array(8,0); proporcje = new Array(8,0); break;case 11: UP = new Array(8,4,5); proporcje = new Array(2,1,5); break;case 12: UP = new Array(1,9); proporcje = new Array(3,5); break;default : UP = new Array(); proporcje = new Array(100); break;}for(i=0;i<UP.length;i++) {proporcje[i] = Math.round( proporcje[i] * (100/8) );}return new Array(UP, proporcje);}function rysUkrytePnie(pkonar) {ukrytePnie = dajUkrytePnie(pkonar);UP = ukrytePnie[0];proporcje = ukrytePnie[1];wynikUP = '<table class="up" cellspacing="0" cellpadding="0">';wynikUP = wynikUP+'<tr style="height:20px">';for(i=0;i<UP.length;i++) {pien = UP[i];if(UP[i]!=0)wynikUP= wynikUP+ '<td class="p'+pien+'" style="width:'+Math.round(proporcje[i]*1.5).toString()+'px;">'+pnie[pien]+'</td>';}wynikUP= wynikUP+ '</tr>';wynikUP= wynikUP+'</table>';return wynikUP;}function wyliczZrodlo(pienSzukany, pnieUr, konaryUr) {znalezione = 0;for(i=0;i<pnieUr.length;i++) {if(pnieUr[i] == pienSzukany) znalezione += 5;}for(k=0;k<konaryUr.length;k++) {listaPni = dajUkrytePnie(konaryUr[k]);UP = listaPni[0];proporcje = listaPni[1];if(k==1) sezon = 2; else sezon = 1;for(j=0;j<UP.length;j++) {if(pienSzukany == UP[j]) {znalezione += ((proporcje[j]*8)/100)*sezon;}}}return znalezione;}var tenGoods = new Array('','Peers (DM)', 'Output', 'Wealth', 'Power', 'Resource');var przemiany = new Array('','Wood', 'Fire', 'Earth', 'Metal', 'Water');function rysujZrodlo(numerGood, przemiana, ile) {width = Math.round(ile*mnoznik*2); if (width > 200) width = 200; border=0;wynikZr ='';wynikZr = '<tr><td class="left'+border+'">'+tenGoods[numerGood]+' &nbsp; </td><td style="width:80px;" class="'+border+'">'+przemiany[przemiana]+'</td><td class="right'+border+'">'+Math.round(ile)+ '<span class="sz"></span></td><td class="'+border+'"><table cellspacing="0" cellpadding="0" style="width:200px"  class="f12"><tr><td class="ramka2 p'+(przemiana*2)+'" style="width:'+width+'px">&nbsp;</td><td style="width:'+(200-width)+'px">&nbsp;</td></tr></table></td></tr>';return wynikZr;}function rysujTabelke(wladza,analogia,zrodlo,spelnienie,bogactwo,ileWladzy,ileBogactwa,ileSpelnienia,ileAnalogii,ileSpelnienia) {outTab = '<div class="f12">DM strength<br>&nbsp;<table class="left f12 ">';outTab = outTab + rysujZrodlo(5, zrodlo, ileZrodla); outTab = outTab + rysujZrodlo(1, analogia, ileAnalogii);outTab = outTab + rysujZrodlo(2, spelnienie, ileSpelnienia);outTab = outTab + rysujZrodlo(3, bogactwo, ileBogactwa); outTab = outTab + rysujZrodlo(4, wladza, ileWladzy); outTab = outTab + '</table></div>'; return outTab;}function rysujSileDM(silaDM, slaboscDM) {jeden = silaDM + slaboscDM;mnoznikSila = 100/jeden;width = Math.round(silaDM*mnoznikSila);out = '<div style="font-size:12px;padding-top:5px" >';out = out + '<table cellspacing="3" cellpadding="0" style="width:100%;"><tr><td class="center" style="width:'+width+'%">Supporting&nbsp;elements: </td><td class="center" style="width:'+(100-width)+'%">Opposing&nbsp;elements: </td></tr></table>';out = out + '<table cellspacing="0" cellpadding="0" style="width:100%;"><tr><td class="center ramka2 sila" style="width:'+width+'%">'+Math.round(silaDM*mnoznikSila)+'%</td><td class="center ramka2 slab" style="width:'+(100-width)+'%">'+Math.round(slaboscDM*mnoznikSila)+'%</td></tr></table></div>';return out;}function przelicz() {ema();rok = document.getElementById('r').value;rokO = rok;miesiac = document.getElementById('m').value;dzien = document.getElementById('d').value;godzina = document.getElementById('g').value;minuta = document.getElementById('g2').value;gmtval = document.getElementById('gmt').value;data4f = data4fp2(rok, miesiac, dzien, godzina, minuta, parseInt(gmtval));dzienRokuUr = data4f[11];if (hc(document.getElementById(data4f[8]).innerHTML) != hv) data4f = new Array();pnieUr = new Array(data4f[6], data4f[2], data4f[4], data4f[0]); konaryUr = new Array(data4f[1], data4f[3], data4f[5], data4f[7]); pienDM = data4f[4];zywiolDM = Math.ceil(pienDM/2);analogia = zywiolDM;wAnalogia = pienDM;nAnalogia = (analogia*2 - 1 + (wAnalogia%2));zrodlo = zywiolDM - 1;if(zrodlo == 0) zrodlo = 5;wZrodlo = (zrodlo*2 - (nAnalogia%2)); nZrodlo = (zrodlo*2 - (wAnalogia%2));wladza = zywiolDM - 2;if(wladza < 1) wladza += 5;wWladza = (wladza*2 - (nAnalogia%2));nWladza = (wladza*2 - (wAnalogia%2));spelnienie = zywiolDM + 1;if(spelnienie == 6) spelnienie = 1;wSpelnienie = (spelnienie*2 - (wAnalogia%2)); nSpelnienie = (spelnienie*2 - (nAnalogia%2));bogactwo = zywiolDM + 2;if(bogactwo > 5) bogactwo -= 5; wBogactwo = (bogactwo*2 - (nAnalogia%2));nBogactwo = (bogactwo*2 - (wAnalogia%2));ileNA = wyliczZrodlo(nAnalogia, pnieUr, konaryUr);ileWA = wyliczZrodlo(wAnalogia, pnieUr, konaryUr);ileNZ = wyliczZrodlo(nZrodlo, pnieUr, konaryUr);ileWZ = wyliczZrodlo(wZrodlo, pnieUr, konaryUr);ileNW = wyliczZrodlo(nWladza, pnieUr, konaryUr);ileWW = wyliczZrodlo(wWladza, pnieUr, konaryUr);ileNS = wyliczZrodlo(nSpelnienie, pnieUr, konaryUr);ileWS = wyliczZrodlo(wSpelnienie, pnieUr, konaryUr);ileNB = wyliczZrodlo(nBogactwo, pnieUr, konaryUr);ileWB = wyliczZrodlo(wBogactwo, pnieUr, konaryUr);ileAnalogii = ileNA + ileWA;ileZrodla = ileNZ + ileWZ;ileWladzy = ileNW + ileWW;ileBogactwa = ileNB + ileWB;ileSpelnienia = ileNS + ileWS;jeden = ileAnalogii + ileZrodla + ileWladzy + ileBogactwa + ileSpelnienia;mnoznik = Math.round(100/jeden);silaDM = (ileAnalogii + ileZrodla); slaboscDM = (ileWladzy + ileSpelnienia + ileBogactwa);poczOkresowFartu = true;if (document.getElementById("plec2").checked == true) polaryzacja = 1; else polaryzacja = 0;polaryzacja = polaryzacja + (data4f[0]%10);polaryzacja = (polaryzacja%2);if (polaryzacja == 0) polaryzacja = -1;else polaryzacja = 1;dzienRoku = dzienRokuUr + parseInt(godzina)/24;poczatekMiesiacaX = data4f[9];poczatekNastMiesiaca = data4f[10];if(poczatekNastMiesiaca < poczatekMiesiacaX) {poczatekMiesiacaX = poczatekMiesiacaX - (365 + 5/24 + (49.5/60)/24);if (dzienRoku > 300) dzienRoku = dzienRoku - (365 + 5/24 + (49.5/60)/24); }dlugoscMiesiaca = poczatekNastMiesiaca - poczatekMiesiacaX;if (polaryzacja == -1) {roznicaDni = dzienRoku - poczatekMiesiacaX;}else if (polaryzacja == 1) {roznicaDni = poczatekNastMiesiaca - dzienRoku;}roznicaLat = 10 - roznicaDni/(dlugoscMiesiaca/10);rok = rokO;pierwszyRokFF = Math.round(rokO-roznicaLat);ileSekundTrwaRok = Math.round( (365* 24*60*60) + (5* 60*60) + (49.5 * 60) );poczatekFF1 = new Date(rok,(miesiac-1),dzien,godzina,0);poczatekFF2 = Math.round(ileSekundTrwaRok * roznicaLat * 1000);poczatekFF = new Date(poczatekFF1.getTime() - poczatekFF2);pierwszyMiesiacFF = poczatekFF.getMonth()+1;pierwszyDzienFF = poczatekFF.getDate();pien = data4f[2];konar = data4f[3];htmlOkresyFarta = '<div class="nobreak ramka"><div class="f12">Luck Periods</div>' +'<table cellspacing="1" cellpadding="0" style="padding:3px; width:100%">';rokOkresu = pierwszyRokFF;listaOkresow = new Array();for(i=1;i<10;i++) {wiekWyswietlany = rokOkresu;miesiacWysw = pierwszyMiesiacFF;if(rokOkresu < rok) { wiekWyswietlany=rok; miesiacWysw=miesiac; }htmlTenOkres = new Array();htmlTenOkres[0] = '<td style="width:11%;" class="f12 sz">'+miesiacWysw+'/'+wiekWyswietlany+'+</td>';htmlTenOkres[1] = '<td class="p'+ pien + '" name="p'+ pien + '" style="padding:5px">'+ pnie[pien]+'<div style="font-size:11px;padding-top:4px">'+pnieEn[pien]+'</div></td>';htmlTenOkres[2] = '<td class="k' + konar + '" name="k' + konar + '" style="padding:5px">'+ konary[konar]+'<div style="font-size:11px;padding-top:4px">'+konaryEn[konar]+'</div></td>';listaOkresow[i] = htmlTenOkres;pien = pien + polaryzacja;if(pien<1) pien=pien+10;if(pien>10) pien=pien-10;konar = konar + polaryzacja;if(konar<1) konar=konar+12;if(konar>12) konar=konar-12;rokOkresu=rokOkresu+10;}htmlOkresyFarta0 = '<tr>';htmlOkresyFarta1 = '<tr>';htmlOkresyFarta2 = '<tr>';for(n=9;n>0;n--) {tenOkres = listaOkresow[n];htmlOkresyFarta0 = htmlOkresyFarta0+tenOkres[0];htmlOkresyFarta1 = htmlOkresyFarta1+tenOkres[1];htmlOkresyFarta2 = htmlOkresyFarta2+tenOkres[2];}htmlOkresyFarta =  htmlOkresyFarta + htmlOkresyFarta0 + '</tr>' + htmlOkresyFarta1 + '</tr>' +htmlOkresyFarta2 + '</tr></table></div>';document.getElementById('PG').className = 'p'+[data4f[6]];document.getElementById('PD').className = 'p'+[data4f[4]];document.getElementById('PM').className = 'p'+[data4f[2]];document.getElementById('PR').className = 'p'+[data4f[0]];document.getElementById('KG').className = 'k'+[data4f[7]];document.getElementById('KD').className = 'k'+[data4f[5]];document.getElementById('KM').className = 'k'+[data4f[3]];document.getElementById('KR').className = 'k'+[data4f[1]];document.getElementById('PG').innerHTML = pnie[data4f[6]]+'<div style="font-size:11px;padding-top:7px">'+pnieEn[data4f[6]]+'</div>';document.getElementById('PD').innerHTML = pnie[data4f[4]]+'<div style="font-size:11px;padding-top:7px">'+pnieEn[data4f[4]]+'</div>';document.getElementById('PM').innerHTML = pnie[data4f[2]]+'<div style="font-size:11px;padding-top:7px">'+pnieEn[data4f[2]]+'</div>';document.getElementById('PR').innerHTML = pnie[data4f[0]]+'<div style="font-size:11px;padding-top:7px">'+pnieEn[data4f[0]]+'</div>';document.getElementById('KG').innerHTML = konary[data4f[7]]+'<div style="font-size:11px;padding-top:7px">'+konaryEn[data4f[7]]+'</div>';document.getElementById('KD').innerHTML = konary[data4f[5]]+'<div style="font-size:11px;padding-top:7px">'+konaryEn[data4f[5]]+'</div>';document.getElementById('KM').innerHTML = konary[data4f[3]]+'<div style="font-size:11px;padding-top:7px">'+konaryEn[data4f[3]]+'</div>';document.getElementById('KR').innerHTML = konary[data4f[1]]+'<div style="font-size:11px;padding-top:7px">'+konaryEn[data4f[1]]+'</div>';document.getElementById('UPG').innerHTML = rysUkrytePnie(data4f[7]);document.getElementById('UPD').innerHTML = rysUkrytePnie(data4f[5]);document.getElementById('UPM').innerHTML = rysUkrytePnie(data4f[3]);document.getElementById('UPR').innerHTML = rysUkrytePnie(data4f[1]);document.getElementById('PKG').innerHTML = rysujPusteKonary(data4f[7], data4f[6]);document.getElementById('PKD').innerHTML = rysujPusteKonary(data4f[5], data4f[4]);document.getElementById('PKM').innerHTML = rysujPusteKonary(data4f[3], data4f[2]);document.getElementById('PKR').innerHTML = rysujPusteKonary(data4f[1], data4f[0]);document.getElementById('silaDM').innerHTML = rysujTabelke(wladza,analogia,zrodlo,spelnienie,bogactwo,ileWladzy,ileBogactwa,ileSpelnienia,ileAnalogii,ileSpelnienia) + rysujSileDM(silaDM, slaboscDM);document.getElementById('ff').innerHTML = htmlOkresyFarta;}function wstawDaty() {teraz = new Date();document.getElementById('r').value = teraz.getFullYear();document.getElementById('m').value = teraz.getMonth()+1;document.getElementById('d').value = teraz.getDate();document.getElementById('g').value = teraz.getHours();document.getElementById('g2').value = teraz.getMinutes();}var zadanie; function wyjatek(err, lokalizacja){if (document.getElementById("info1"))document.getElementById("info1").innerHTML =document.getElementById("info1").innerHTML+ "Error " + lokalizacja + ": " + err.message + "<br />";else document.write("Error " + lokalizacja + ": " + err.message + "<br />");}function blad(tekst){if (document.getElementById("info1"))document.getElementById("info1").innerHTML = document.getElementById("info1").innerHTML+ "Error: " + tekst + "<br />";else document.write("Error: " + tekst + "<br />");}function wyslijZadanie(url, metoda, async, post, obsluzOdpowiedz){try {if (!metoda) var metoda = "GET";if (!async)  var async  = false;if (!post)   var post   = null;if (!obsluzOdpowiedz) var obsluzOdpowiedz = null;if (window.XMLHttpRequest){zadanie = new XMLHttpRequest();}else if (window.ActiveXObject){zadanie = new ActiveXObject("Microsoft.XMLHTTP");}else { blad("Your browser doesn't support Ajax."); }if (!zadanie) blad("Failed: Ajax request not initiated.");else {try {if (async)zadanie.onreadystatechange = obsluzOdpowiedz;zadanie.open(metoda, url, async);zadanie.send(post);if (!async){if (zadanie.readyState==4 && zadanie.status==0)blad("Niepoprawny wynik / odmowa dostepu 1; stan: " + zadanie.readyState + "|" + zadanie.status);else return zadanie.responseXML;}} catch (err) { wyjatek(err, 2); }}} catch (err) { wyjatek(err, 1); }}function pobierzGMT(id,lat,lon){try {if(id==1)var dataObj = new Date(document.getElementById("r").value,(document.getElementById("m").value)-1,document.getElementById("d").value,12,0,0);else if(id==2)var dataObj = new Date(document.getElementById("r2").value,(document.getElementById("m2").value)-1,document.getElementById("d2").value,12,0,0);var dataSzukana = Math.round((dataObj.getTime())/1000);var url="https://";url=url+"?location="+lat+","+lon;url=url+"&timestamp="+dataSzukana;wyslijZadanie(url, "GET", true, null, function(){if (zadanie.readyState==4){if (zadanie.status==200){wynikJson = zadanie.responseText;wynik = JSON.parse(wynikJson);if (wynik.status == "OK") {if (wynik.dstOffset == 3600) czasLetni = "yes"; else czasLetni = "no";if (wynik.dstOffset == 3600) dst = true; else dst = false;if(wynik.rawOffset) timezone = Math.round(wynik.rawOffset/3600);else timezone = 0;if (timezone > 0) timezoneTxt = "+"+timezone; else timezoneTxt = timezone;document.getElementById("info"+id).innerHTML = document.getElementById("info"+id).innerHTML + "<span style='color:orange'>Timezone: GMT"+timezoneTxt+" ("+wynik.timeZoneName+", "+wynik.timeZoneId+")<br />DST: "+czasLetni+"<br />Values updated!</span>";if(id==1) {document.getElementById("gmt").value = timezone;document.getElementById("ds").checked=dst;}else if(id==2) {document.getElementById("gmt2").value = timezone;document.getElementById("ds2").checked=dst;}}else blad("Failed to retrieve timezone: " + wynik.status );}else blad("Failed to retrieve timezone; Ajax resp: " + zadanie.readyState + "|" + zadanie.status);}});} catch (err) { wyjatek(err, 3); }}function dajFocus() {document.getElementById('licz').focus(); }function wyszarz() {if (document.getElementById('data2').checked == false) {document.getElementById('r2').disabled = 'disabled';document.getElementById('m2').disabled = 'disabled';document.getElementById('d2').disabled = 'disabled';document.getElementById('g2').disabled = 'disabled';document.getElementById('r2').value = '';document.getElementById('m2').value = '';document.getElementById('d2').value = '';document.getElementById('g2').value = '';}else {document.getElementById('r2').disabled = '';document.getElementById('m2').disabled = '';document.getElementById('d2').disabled = '';document.getElementById('g2').disabled = '';}}function lin() {if(document.getElementById('OL').checked)document.getElementById('LIn').style.display = 'block';else document.getElementById('LIn').style.display = 'none';}function uh1c() {if(document.getElementById('uh1').checked)document.getElementById('g').value = '?';else document.getElementById('g').value = '';}function uh2c() {if(document.getElementById('uh2').checked)document.getElementById('g2').value = '?';else document.getElementById('g2').value = '';}function show3(e1, e2, e3, klasaCSS) {var klasa;var elements1 = document.getElementsByName(e1);var elements2 = document.getElementsByName(e2);var elements3 = document.getElementsByName(e3);if (klasaCSS!='') klasa=klasaCSS;if (klasaCSS=='') klasa=e1;for (i = 0; i < elements1.length; i++) {elements1[i].className = klasa + 'b';}if (klasaCSS=='') klasa=e2;for (i = 0; i < elements2.length; i++) {elements2[i].className = klasa + 'b';}if (klasaCSS=='') klasa=e3;for (i = 0; i < elements3.length; i++) {elements3[i].className = klasa + 'b';}}function hide3(e1, e2, e3, klasa) {var elements1 = document.getElementsByName(e1);var elements2 = document.getElementsByName(e2);var elements3 = document.getElementsByName(e3);for (i = 0; i < elements1.length; i++) {elements1[i].className=e1}for (i = 0; i < elements2.length; i++) {elements2[i].className=e2}for (i = 0; i < elements3.length; i++) {elements3[i].className=e3}}function save() { if(document.getElementById('save').style.display=="none")document.getElementById('save').style.display="inline";else document.getElementById('save').style.display="none";document.getElementById('send1').style.display="none";}function send(eml) {var locat = 'phpToPDF.php' + document.getElementById('mojURL').value + '&eml=' + eml + '&email=' + document.getElementById('email').value + '&sign='  + document.getElementById('sign').value;window.location = locat;}function dodajDate(element, doPrzodu) {if (doPrzodu == true) modyfikacja = 1;else modyfikacja = -1;wartosc = parseInt(document.getElementById(element).value);wartosc = wartosc + modyfikacja;if ((element == 'g') || (element == 'g2')) {if (wartosc > 23) wartosc = 0;if (wartosc < 0) wartosc = 23;}if ((element == 'd') || (element == 'd2')) {if (wartosc > 31) wartosc = 1;if (wartosc < 1) wartosc = 31;}if ((element == 'm') || (element == 'm2')) {if (wartosc > 12) wartosc = 1;if (wartosc < 1) wartosc = 12;}if ( document.getElementById(element).value.indexOf(':') != -1) {minuty = document.getElementById(element).value.split(':');document.getElementById(element).value = wartosc + ':' + minuty[1];}else {document.getElementById(element).value = wartosc;}}  </script>  </head>  <body onload="wstawDaty();przelicz()">  <div id="div1">  <div id="div2" style="width:880px;">  <h1 style="font-family:verdana; ">Mini BaZi Calculator</h1>  <form method="post" action="">    <table class="noprint" style="width:100%" cellspacing="15">  <tr>  <td colspan="2" class="ramka left" >    <table style="width:415px; font-size:12px; margin:auto;" class="left">  <tr><td style="width:20%">Hour (RST)</td><td style="width:20%">Day</td><td style="width:20%">Month</td><td style="width:20%">Year</td>  <td  style="width:20%" class="left11">  <input type="radio" name="s" id="plec1" style="width:15px" value="0"  checked="checked" /><label for="plec1">M</label>  <input type="radio" name="s" id="plec2" style="width:15px" value="1" /><label for="plec2">F</label>  </td></tr>  <tr><td>  <input type="text" id="g" name="h" value="20" style="width:15px" maxlength="2" />:<input type="text" id="g2" name="h2" value="05" style="width:15px" maxlength="2" />  </td><td>  <input type="text" id="d" name="d" value="08" maxlength="2" />  </td><td>  <input type="text" id="m" name="m" value="11" maxlength="2" />   </td><td>  <input type="text" id="r" name="y" value="2014" maxlength="4" />  </td>  <td class="left11">      GMT <select name="g" id="gmt" class="left11">  <option value="-12">-12</option>   <option value="-11">-11</option>   <option value="-10">-10</option>   <option value="-9">-9</option>   <option value="-8">-8</option>   <option value="-7">-7</option>   <option value="-6">-6</option>   <option value="-5">-5</option>   <option value="-4">-4</option>   <option value="-3">-3</option>   <option value="-2">-2</option>   <option value="-1">-1</option>   <option value="0" selected="selected">0</option>   <option value="1">+1</option>   <option value="2">+2</option>   <option value="3">+3</option>   <option value="4">+4</option>   <option value="5">+5</option>   <option value="6">+6</option>   <option value="7">+7</option>   <option value="8">+8</option>   <option value="9">+9</option>   <option value="10">+10</option>   <option value="11">+11</option>   <option value="12">+12</option>   </select>    </td>  </tr>      <tr>    <td colspan="5" style="text-align:center;padding-top:10px">   <input type="button" id="licz" name="licz" class="silver" value="Calculate" onclick="przelicz()" style="width:125px;height:25px" />  </td>    </tr>  <tr><td colspan="5" class="left11">    <div id="info1"></div>      </td></tr></table>    </td></tr>        <tr>     <td class="ramka" valign="top" style="width:50%">      <table >       <tr class="f12 szary">        <td>Hour</td>        <td>Day</td>        <td>Month</td>        <td>Year</td>       </tr>       <tr>        <td id="PG" name="p9" style="width:21%; height:50px">&nbsp;</td>        <td id="PD" name="p10" style="width:21%">&nbsp;</td>        <td id="PM" name="p2" style="width:21%">&nbsp;</td>        <td id="PR" name="p1" style="width:21%;">&nbsp;</td>       </tr>       <tr>        <td id="KG" name="k11" style="height:50px">&nbsp;</td>        <td id="KD" name="k8">&nbsp;</td>        <td id="KM" name="k12">&nbsp;</td>        <td id="KR" name="k7">&nbsp;</td>       </tr>       <tr class="HHS">        <td id="UPG">&nbsp;</td>        <td id="UPD">&nbsp;</td>        <td id="UPM">&nbsp;</td>        <td id="UPR">&nbsp;</td>       </tr>        <tr >        <td id="PKG" class="gwiazdy center">&nbsp;</td>        <td id="PKD" class="gwiazdy center">&nbsp;</td>        <td id="PKM" class="gwiazdy center">&nbsp;</td>        <td id="PKR" class="gwiazdy center">&nbsp;</td>       </tr>               </table>     </td>         <td class="ramka" id="silaDM" valign="top" style="width:50%">&nbsp;</td>    </tr>        <tr>         <td id="ff" colspan="2">&nbsp;</td>         </tr>        <tr><td class="sz" colspan="2" id="calc" style="font-size:11px">Written by <a id="ema" href="#void">Voytek</a>. For more detailed calculations (shen sha, interactions and more) visit: <a href="http://bazi-calculator.com">bazi-calculator.com</a></td></tr>      <tr><td class="sz f12" colspan="2" style="font-size:11px">Copyright 2014-2020 Wojciech Jach (Voytek). All rights reserved.<br />     DM strength formula come courtesy of Ken Lai.</td></tr>        </table>    </form>        </div>  </div>  </body>  </html>